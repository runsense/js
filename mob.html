<!DOCTYPE html>
<html >
<head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>runsense Mobile</title>
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.css">
	
	<link rel="stylesheet" href="./jqx/demo.css" type="text/css" />
    <link rel="stylesheet" href="./jqx/jqx.windowsphone.css" type="text/css" />
    <link rel="stylesheet" href="./jqx/jqx.blackberry.css" type="text/css" />
    <link rel="stylesheet" href="./jqx/jqx.android.css" type="text/css" />
    <link rel="stylesheet" href="./jqx/jqx.mobile.css" type="text/css" />
	<link rel="stylesheet" href="./jqx/jqx.ui-le-frog.css" type="text/css" />
    <link rel="stylesheet" href="./jqx/jqx.base.css" type="text/css" />
	
	<style>
		#map-page, #map_canvas { width: 100%; height: 100%; padding: 0; }
	</style>
	
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="./js/mob/simulator.js"></script>
	<script type="text/javascript" src="./jqx/jqxcore.js"></script>
	<script type="text/javascript" src="./jqx/jqxdata.js"></script>
    <script type="text/javascript" src="./jqx/jqxbuttons.js"></script>
    <script type="text/javascript" src="./jqx/jqxscrollbar.js"></script>
    <script type="text/javascript" src="./jqx/jqxpanel.js"></script>
    <script type="text/javascript" src="./jqx/jqxtree.js"></script>
	<script type="text/javascript" src="./jqx/jqxcheckbox.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.js"></script>
	
	<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places">
    </script>
	
	<script type="text/javascript" src="js/FuncRoute.js"></script>
	<script type="text/javascript" src="js/mob/FuncTree.mob.js"></script>
	 <script type="text/javascript" src="js/maps_lib.js"></script>	
  <script type="text/javascript">
 
		$( document ).on( "pageinit", "#map-page", function() {
		var theme = prepareSimulator("jqxTree");
	

            initSimulator("jqxTree");
	
			$('#jqxTree').jqxTree({source: FuncTree.source, height: '300px', width: '300px' });
	$('#jqxTree').on('expand', function (event) {
		
		
				var elmt = event.args.element;
                var item = $('#jqxTree').jqxTree('getItem',elmt );
					
				/*$('#jqxTree').jqxTree('selectItem', elmt);
					$('#jqxTree').jqxTree('refresh');*/
					//chkItm(item);
				/*try{
					var elmSrce =schrrefifd(item.label);
				alert(elmSrce);
					var items=elmSrce.items;
						applyChild(items);
					}catch( ex)	
					{
						alert(ex.toString);
					}*/
					FuncTree.applysrch(item);
					MapsLib.doSearch();
				
           });
    $('#jqxTree').on('collapse', function (event) {
		FuncTree.ptbid=new Array();
		$('#jqxTree').jqxTree('uncheckAll');
                var args = event.args;
                var elmt = args.element;
                var item = $('#jqxTree').jqxTree('getItem',elmt );
				/*$('#jqxTree').jqxTree('selectItem', elmt);
					$('#jqxTree').jqxTree('refresh');*/
				
					$("#listv").empty();
					FuncTree.applysrch(null);
					MapsLib.doSearch();
			
    });
	$('#jqxTree').bind('select', function (event) {
			
                var htmlElement = event.args.element;
                var item = $('#jqxTree').jqxTree('getItem', htmlElement);
				
				if(!item.checked)
					{
					
						$("#jqxTree").jqxTree('checkItem', htmlElement, true);
					//clear check	
					}
				else{
					
						$('#jqxTree').jqxTree('uncheckItem', htmlElement);
					//check item
				}
				
					
            });
	$("#jqxTree").bind('checkChange', function (event) {
				
						FuncTree.applysrch(null);
						MapsLib.doSearch();
					
			});
	
		
    MapsLib.initialize();
	$("#jqxTree").jqxTree('expandItem', $("#S")[0]);
	});
	
	$( document ).bind( "mobileinit", function()
	{
	   $.mobile.textinput.prototype.options.initSelector = ".dev";
	   $( ".dev" ).bind( "focus", function(event, ui) {
		  MapsLib.additi('dep'); 
		});
	});
	
	
	
    </script>
</head>
<body>
	
    <div data-role="page" id="map-page">
		<div data-role="header" data-theme="a">
			<div data-role="navbar">
				<ul>
					<li><a href="#recherche">ARBRE</a></li>
					<li><a href="#itipage">ITINéraire</a></li>
					<li><a href="#listvpage">TABLEAU</a></li>
				</ul>
			</div>
		</div>

		<div role="main" class="ui-content" id="map_canvas">
			<!-- map loads here... -->
		</div>
	</div>
	<div data-role="page" id="recherche" >
		<div data-role="header" data-theme="a">
			<div data-role="navbar">
				<ul>
					<li><a href="#itipage">ITINéraire</a></li>
					<li><a href="#map-page">MAP</a></li>
					<li><a href="#listvpage">TABLEAU</a></li>
				</ul>
			</div>

		</div>

		<div role="main"  class="ui-content" id="jqxTree">
			<!-- donner -->
			
		</div>
	</div>
	<div data-role="page" id="listvpage" >
		<div data-role="header" data-theme="a">
			<div data-role="navbar">
				<ul>
					<li><a href="#recherche">ARBRE</a></li>
					<li><a href="#map-page">MAP</a></li>
					<li><a href="#itipage">ITINéraire</a></li>
				</ul>
			</div>

		</div>

		<div role="main"  class="ui-content" id="listv">
			<!-- donner -->
			
		</div>
	</div>
	<div data-role="page" id="itipage" >
		<div data-role="header" data-theme="a">
			<div data-role="navbar">
				<ul>
					<li><a href="#recherche">ARBRE</a></li>
					<li><a href="#map-page">MAP</a></li>
					<li><a href="#listvpage">TABLEAU</a></li>
				</ul>
			</div>

		</div>
			<div data-role="fieldcontain">
				<label for="dep">départ<label>
				<input type="text" name="dep" class="dep" id="dep" value="Entrer adresse ou sélectionner et pointer sur carte"  />
			</div>	
			<div data-role="fieldcontain">
				<label for="arv">arrivé</label>
				<input type="text" name="arv" class="arv" id="arv" value="Entrer adresse ou sélectionner et pointer sur carte"  />
			</div>	
		<div role="main"  class="ui-content" id="itin">
			
			
		</div>
		
	</div>
	
</body>
</html>